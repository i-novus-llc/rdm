<?xml version='1.0' encoding='UTF-8'?>
<query xmlns="http://n2oapp.net/framework/config/schema/query-4.0" name="Атрибут">

    <list result-mapping="['collection']" count-mapping="['count']">
        <java method="getCollectionPage" class="ru.inovus.ms.rdm.service.StructureController">
            <spring/>
            <arguments>
                <argument type="criteria" class="ru.inovus.ms.rdm.model.AttributeCriteria" name="criteria"/>
            </arguments>
        </java>
    </list>
    <unique result-mapping="collection[0]" filters="versionId,code">
        <java method="getCollectionPage" class="ru.inovus.ms.rdm.service.StructureController">
            <spring/>
            <arguments>
                <argument type="criteria" class="ru.inovus.ms.rdm.model.AttributeCriteria" name="criteria"/>
            </arguments>
        </java>
    </unique>

    <fields>
        <field id="id" domain="string">
            <select mapping="code"/>
        </field>

        <field id="code" domain="string" name="Код">
            <select mapping="code"/>
            <filters>
                <eq filter-id="code" mapping="code" domain="string"/>
            </filters>
        </field>

         <field id="versionId" domain="integer" >
             <select mapping="versionId"/>
             <filters>
                 <eq filter-id="versionId" mapping="versionId" domain="integer"/>
             </filters>
        </field>

        <field id="referenceRefBook.id" domain="integer">
            <select mapping="referenceRefBookId"/>
        </field>

        <field id="name" domain="string" name="Наименование">
            <select/>
        </field>

        <field id="attrType.id" domain="string" name="Тип данных">
            <select mapping="type.name()"/>
        </field>

        <field id="description" domain="string">
            <select/>
        </field>

        <field id="isPrimary" domain="boolean">
            <select/>
        </field>

        <field id="referenceVersion.id" domain="integer">
            <select mapping="referenceVersion"/>
        </field>

        <field id="referenceAttribute.code" domain="string">
            <select mapping="referenceAttribute"/>
        </field>

        <field id="referenceAttribute.name" domain="string">
            <select mapping="referenceAttributeName"/>
        </field>

        <!--<field id="referenceDisplayAttribute.code" domain="string">-->
            <!--<select mapping="referenceDisplayAttribute"/>-->
        <!--</field>-->

        <!--<field id="referenceDisplayAttribute.name" domain="string">-->
            <!--<select mapping="referenceDisplayAttributeName"/>-->
        <!--</field>-->

        <field id="keyAttribute" name="Ключевой атрибут" domain="string">
            <select mapping="isPrimary ? 'Первичный ключ' : null"/>
        </field>

        <field id="isReference" name="Ссылочное поле" domain="boolean">
            <select mapping="type?.name()?.equals('REFERENCE')"/>
        </field>

    </fields>
</query>