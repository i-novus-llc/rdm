<?xml version='1.0' encoding='UTF-8'?>
<query xmlns="http://n2oapp.net/framework/config/schema/query-4.0" name="Атрибут">

    <list result-mapping="['content']" count-mapping="['totalElements']">
        <java method="getPage" class="ru.inovus.ms.rdm.service.StructureController">
            <spring/>
            <arguments>
                <argument type="criteria" class="ru.inovus.ms.rdm.model.AttributeCriteria" name="criteria"/>
            </arguments>
        </java>
    </list>
    <unique result-mapping="['content'][0]" filters="versionId,code">
        <java method="getPage" class="ru.inovus.ms.rdm.service.StructureController">
            <spring/>
            <arguments>
                <argument type="criteria" class="ru.inovus.ms.rdm.model.AttributeCriteria" name="criteria"/>
            </arguments>
        </java>
    </unique>

    <fields>
        <field id="id" domain="string">
            <select mapping="code"/>
            <filters>
                <eq filter-id="id" mapping="code" domain="string"/>
            </filters>
        </field>

        <field id="code" domain="string" name="Код">
            <select mapping="code"/>
            <filters>
                <eq filter-id="code" mapping="code" domain="string"/>
            </filters>
        </field>

        <field id="versionId" domain="integer">
            <select mapping="versionId"/>
            <filters>
                <eq filter-id="versionId" mapping="versionId" domain="integer"/>
            </filters>
        </field>

        <field id="referenceRefBook.id" domain="integer">
            <select mapping="referenceRefBookId"/>
        </field>

        <field id="name" domain="string" name="Наименование">
            <select/>
        </field>

        <field id="attrType.id" domain="string" name="Тип данных">
            <select mapping="type.name()"/>
        </field>

        <field id="attrType.name" domain="string" name="Тип данных">
            <select mapping="type.name()=='STRING'?'Строковый':
                             type.name()=='INTEGER'?'Целочисленный':
                             type.name()=='FLOAT'?'Дробный':
                             type.name()=='DATE'?'Дата':
                             type.name()=='BOOLEAN'?'Логический':
                             type.name()=='REFERENCE'?'Ссылочный':null"/>
        </field>

        <field id="description" domain="string">
            <select/>
        </field>

        <field id="isPrimary" domain="boolean">
            <select/>
        </field>

        <field id="referenceVersion.id" domain="integer">
            <select mapping="referenceVersion"/>
        </field>

        <field id="referenceAttribute.code" domain="string">
            <select mapping="referenceAttribute"/>
        </field>

        <field id="referenceAttribute.name" domain="string">
            <select mapping="referenceAttributeName"/>
        </field>

        <!--<field id="referenceDisplayAttribute.code" domain="string">-->
        <!--<select mapping="referenceDisplayAttribute"/>-->
        <!--</field>-->

        <!--<field id="referenceDisplayAttribute.name" domain="string">-->
        <!--<select mapping="referenceDisplayAttributeName"/>-->
        <!--</field>-->

        <field id="keyAttribute" name="Ключевой атрибут" domain="string">
            <select mapping="isPrimary ? 'Первичный ключ' : null"/>
        </field>

        <field id="isReference" name="Ссылочное поле" domain="boolean">
            <select mapping="type?.name()?.equals('REFERENCE')"/>
        </field>

        <field id="required">
            <select/>
        </field>
        <field id="unique">
            <select/>
        </field>
        <field id="plainSize">
            <select/>
        </field>
        <field id="intPartSize">
            <select/>
        </field>
        <field id="fracPartSize">
            <select/>
        </field>
        <field id="minInteger">
            <select/>
        </field>
        <field id="maxInteger">
            <select/>
        </field>
        <field id="minFloat">
            <select/>
        </field>
        <field id="maxFloat">
            <select/>
        </field>
        <field id="dateInterval.begin">
            <select mapping="minDate"/>
        </field>
        <field id="dateInterval.end">
            <select mapping="maxDate"/>
        </field>
        <field id="regExp">
            <select/>
        </field>

    </fields>
</query>