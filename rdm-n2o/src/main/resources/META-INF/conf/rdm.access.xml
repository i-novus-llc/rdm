<access xmlns="http://n2oapp.net/framework/config/schema/access-2.0">

    <permit-all>
        <page-access page-id="refBookList"/>

        <object-access object-id="refBook"/>
        <object-access object-id="refBookVersion"/>
        <object-access object-id="versionList"/>
        <object-access object-id="attribute"/>
        <object-access object-id="data"/>

        <object-filters object-id="refBook">
            <eq id="nonArchived" field-id="nonArchived" value="true"/>
            <eq id="onlyPublished" field-id="excludeDraft" value="true"/>
            <eq id="oncePublished" field-id="hasPublished" value="true"/>
        </object-filters>

        <object-filters object-id="refBookVersion">
            <!-- RdmPermission.excludeDraft() -->
            <eq id="lastOnlyPublished" field-id="excludeDraft" value="true"/>
        </object-filters>

        <object-filters object-id="versionList">
            <eq id="listOnlyPublished" field-id="excludeDraft" value="true"/>
        </object-filters>

    </permit-all>

    <permission id="nsi.list" name="Просмотр списка справочников">
        <page-access page-id="refBookList"/>

    </permission>

    <permission id="nsi.read" name="Просмотр справочников">
        <page-access page-id="refBookView"/>

    </permission>

    <permission id="nsi.edit" name="Добавление/редактирование справочников">
        <page-access page-id="refBook"/>
        <page-access page-id="attribute"/>
        <page-access page-id="createRefBook"/>
        <page-access page-id="createFromFile"/>
        <page-access page-id="uploadFile"/>
        <page-access page-id="uploadData"/>
        <page-access page-id="publish"/>

        <object-access object-id="refBook"
                       remove-filters="nonArchived,onlyPublished,oncePublished"
                       operations="create,edit,delete,refreshReferrer,
                            createFromFile,uploadFromFile,uploadData"
        />
        <object-access object-id="refBookVersion" remove-filters="lastOnlyPublished"/>
        <object-access object-id="versionList" remove-filters="listOnlyPublished"/>
        <object-access object-id="attribute" operations="*"/>
        <object-access object-id="data" operations="*"/>

    </permission>

    <permission id="nsi.archive" name="Архивирование справочников">
        <object-access object-id="refBook"
                       remove-filters="nonArchived,onlyPublished,oncePublished"
                       operations="toArchive,fromArchive"
        />
    </permission>

    <permission id="nsi.download" name="Выгрузка справочников">
        <page-access page-id="downloadFile"/>

    </permission>

    <permission id="audit">
        <page-access page-id="audit"/>

    </permission>

    <role id="admin">
        <url-access pattern="${rdm.user.admin.url}"/>

    </role>

</access>