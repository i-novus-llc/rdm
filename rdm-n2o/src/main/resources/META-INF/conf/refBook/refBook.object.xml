<?xml version='1.0' encoding='UTF-8'?>
<object xmlns="http://n2oapp.net/framework/config/schema/object-3.0" name="Справочник">


    <operations>
        <operation id="create" submit-label="Сохранить" success-text="Справочник успешно сохранен">
            <invocation>
                <rest method="POST">/refBook</rest>
            </invocation>

            <in-parameters>
                <param id="code" mapping="code" domain="string" mapper="spel"/>
                <param id="name" mapping="passport.name" domain="string" mapper="spel"/>
                <param id="shortName" mapping="passport.shortName" domain="string" mapper="spel"/>
                <param id="description" mapping="passport.description" domain="string" mapper="spel"/>
            </in-parameters>

            <out-parameters>
                <param id="id" mapping="id" domain="integer"/>
            </out-parameters>

        </operation>

        <operation id="edit" submit-label="Изменить" success-text="Справочник успешно изменен">
            <invocation>
                <rest method="PUT">/refBook</rest>
            </invocation>
            <in-parameters>
                <param id="version.id" mapping="versionId" domain="integer" mapper="spel"/>
                <param id="code" mapping="code" domain="string" mapper="spel"/>
                <param id="name" mapping="passport.name" domain="string" mapper="spel"/>
                <param id="shortName" mapping="passport.shortName" domain="string" mapper="spel"/>
                <param id="description" mapping="passport.description" domain="string" mapper="spel"/>
            </in-parameters>
            <out-parameters>
                <param id="id" mapping="id" domain="integer"/>
            </out-parameters>
        </operation>

        <operation id="delete" submit-label="Удалить" success-text="Справочник удален"
                   confirm="true" confirm-text="Вы уверены что хотите удалить этот справочник?">
            <invocation>
                <rest method="DELETE">/refBook</rest>
            </invocation>
            <in-parameters>
                <param id="refBookId" mapping="refBookId" domain="integer" mapper="spel"/>
            </in-parameters>
        </operation>

        <operation id="publish" submit-label="Опубликовать" success-text="Справочник опубликован"
                   confirm="true" confirm-text="Вы уверены что хотите опубликовать этот справочник?">
            <invocation>
                <rest method="POST">/draft/{draftId}/publish</rest>
            </invocation>
            <in-parameters>
                <param id="version.id" mapping="draftId" domain="integer" mapper="spel"/>
            </in-parameters>
        </operation>

        <operation id="upload" submit-label="Загрузить" success-text="Данные загружены">
            <invocation>
                <rest method="POST">/draft/updateFromFile/{draftId}</rest>
            </invocation>
            <in-parameters>
                <param id="versionId" mapping="draftId" domain="string" mapper="spel"/>
                <param id="file.path" mapping="path" domain="string" mapper="spel"/>
                <param id="file.name" mapping="name" domain="string" mapper="spel"/>
            </in-parameters>
        </operation>
    </operations>

</object>