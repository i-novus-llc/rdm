# RDM REST
 
## Описание свойств в файле ```application.properties```
  - `spring.activemq.broker-url` -- представляет собой адрес брокера сообщений ActiveMQ. 
    Через него проходят, например, сообщения о публикации справочника. По умолчанию "tcp://docker.one:8825".
  - `rdm.enable.publish.topic` -- если это свойство задано как `true`, при старте будут созданы экземпляры классов,
 необходимых для работы ActiveMQ, и будет включено вещание событий публикации справочника. По умолчанию "false".
  - `rdm.publish.topic` -- название топика, по которому вещаются события публикации справочника. По умолчанию "publish_topic".
  - `rdm.loader.server.enabled` -- разрешает создание справочников через механизм лоадеров. По умолчанию "true".
  
## Создание справочников через механизм лоадеров
RDM поддерживает создание и публикацию справочников из xml-файлов с использованием механизма `n2o-platform-loader`.

REST-запрос доступен по пути
`/loaders/{subject}/{target}`, где
`subject` -- владелец данных -- кодовое обозначение приложения, которому требуется функциональность,
`target` -- вид данных, значение должно быть `refBookData`.
Содержимое запроса должно включать прикреплённый xml-файл и иметь `content-type` = `"multipart/form-data"`.
Файл справочника в формате xml можно получить в результате выгрузки этого справочника в рамках RDM.

### Подключение к клиенту
* Добавьте зависимость:
```xml
<dependency>
  <groupId>ru.i-novus.ms.rdm</groupId>
  <artifactId>rdm-loader-client</artifactId>
</dependency>
```

* Создайте файл конфигурации (например, `rdm.json`) в формате:
```json
[
  {
    "code" : "код справочника",
    "file" : "путь к файлу справочника в ресурсах"
  },
  ...
]  
```

* Настройте параметры конфигурации в `application.properties` клиента:
  - `rdm.loader.client.enabled` -- разрешает создание справочников через механизм лоадеров, по умолчанию "true".
  - `rdm.loader.client.url` -- адрес REST-сервиса RDM, по умолчанию "http://docker.one:8807/rdm/api".
  - `rdm.loader.client.subject` -- владелец справочников, по умолчанию "client".
  - `rdm.loader.client.file.path` -- путь к файлу конфигурации, по умолчанию "rdm.json".
